# ğŸ Python å…¨è‡ªåŠ¨åº“å­˜ç›‘æ§æœºå™¨äºº

è¿™æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å•†å“åº“å­˜å’Œä»·æ ¼ç›‘æ§è„šæœ¬æ•™ç¨‹ã€‚å®ƒä½¿ç”¨ Python å’Œ Selenium æ¨¡æ‹ŸçœŸå®æµè§ˆå™¨è®¿é—®ç½‘é¡µä»¥å¯¹æŠ—åçˆ¬è™«æœºåˆ¶ï¼Œé€šè¿‡ Telegram å‘é€å®æ—¶é€šçŸ¥ï¼Œå¹¶æœ€ç»ˆéƒ¨ç½²ä¸ºä¸€ä¸ªå¯åœ¨LinuxæœåŠ¡å™¨ä¸Š7x24å°æ—¶æ— äººå€¼å®ˆè¿è¡Œçš„ç³»ç»ŸæœåŠ¡ã€‚æ¯”å¦‚å¯ä»¥ç”¨æ¥ç›‘æ§ç‹¬è§’æ•°å¡ã€å¼‚æ¬¡å…ƒå‘å¡ç­‰å„ç§å‘å¡ç¨‹åºï¼Œæˆ–è€…æ˜¯ä½ æƒ³è¦ç›‘æ§çš„å…¶ä»–ä¸€äº›ä¸å¤ªä¸¥æ ¼çš„å•†å“é“¾æ¥ã€‚

---

## ç›®å½•

- [ç¬¬ä¸€éƒ¨åˆ†ï¼šå‡†å¤‡å·¥ä½œ](#ç¬¬ä¸€éƒ¨åˆ†å‡†å¤‡å·¥ä½œ-prerequisites)
- [ç¬¬äºŒéƒ¨åˆ†ï¼šæœåŠ¡å™¨ç¯å¢ƒå‡†å¤‡](#ç¬¬äºŒéƒ¨åˆ†æœåŠ¡å™¨ç¯å¢ƒå‡†å¤‡-environment-setup)
- [ç¬¬ä¸‰éƒ¨åˆ†ï¼šåˆ›å»º Telegram æœºå™¨äºº](#ç¬¬ä¸‰éƒ¨åˆ†åˆ›å»º-telegram-æœºå™¨äºº-telegram-bot-setup)
- [ç¬¬å››éƒ¨åˆ†ï¼šç¼–å†™ä¸é…ç½®ç›‘æ§è„šæœ¬](#ç¬¬å››éƒ¨åˆ†ç¼–å†™ä¸é…ç½®ç›‘æ§è„šæœ¬-the-script)
- [ç¬¬äº”éƒ¨åˆ†ï¼šæµ‹è¯•è„šæœ¬](#ç¬¬äº”éƒ¨åˆ†æµ‹è¯•è„šæœ¬-manual-test)
- [ç¬¬å…­éƒ¨åˆ†ï¼šéƒ¨ç½²ä¸ºç³»ç»ŸæœåŠ¡](#ç¬¬å…­éƒ¨åˆ†éƒ¨ç½²ä¸ºç³»ç»ŸæœåŠ¡-deployment-as-a-service)
- [ç¬¬ä¸ƒéƒ¨åˆ†ï¼šæœåŠ¡ç®¡ç†ä¸æ—¥å¿—æŸ¥çœ‹](#ç¬¬ä¸ƒéƒ¨åˆ†æœåŠ¡ç®¡ç†ä¸æ—¥å¿—æŸ¥çœ‹-management)

---

## ç¬¬ä¸€éƒ¨åˆ†ï¼šå‡†å¤‡å·¥ä½œ (Prerequisites)

- **ä¸€å°LinuxæœåŠ¡å™¨**ï¼š Ubuntuã€debianç­‰æœåŠ¡å™¨éƒ½è¡Œã€‚ipv4è¿˜æ˜¯ipv6éƒ½å¯ä»¥ï¼Œè¦æ˜¯ä½ ç›‘æ§çš„ç½‘ç«™ä¸æ”¯æŒipv6ä½ å¯ä»¥å¯ä»¥å¥—ä¸€ä¸ªcfçš„å…è´¹v4å‡ºå£ã€‚
- **ä¸€ä¸ªTelegramè´¦å·**ï¼šç”¨äºæ¥æ”¶åº“å­˜å’Œä»·æ ¼å˜åŠ¨é€šçŸ¥ã€‚
- **åŸºç¡€çš„SSHå·¥å…·**ï¼šå¦‚ Termius, Xshell, PuTTY æˆ–ç³»ç»Ÿè‡ªå¸¦çš„ç»ˆç«¯ï¼Œç”¨äºè¿æ¥ä½ çš„æœåŠ¡å™¨ã€‚

---

## ç¬¬äºŒéƒ¨åˆ†ï¼šæœåŠ¡å™¨ç¯å¢ƒå‡†å¤‡ (Environment Setup)

è¿æ¥ä¸Šä½ çš„æœåŠ¡å™¨åï¼Œä¾æ¬¡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…æ‰€æœ‰å¿…éœ€çš„è½¯ä»¶å’Œä¾èµ–ã€‚

### æ­¥éª¤ 2.1: æ›´æ–°ç³»ç»Ÿè½¯ä»¶åŒ…åˆ—è¡¨

è¿™æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ï¼Œå¯ä»¥ç¡®ä¿ä½ å®‰è£…çš„è½¯ä»¶éƒ½æ˜¯æœ€æ–°çš„ã€‚ï¼ˆéå¿…é¡»ï¼Œè¿™æ¯”è¾ƒè€—æ—¶ï¼‰

```bash
sudo apt update
sudo apt upgrade -y
```

### æ­¥éª¤ 2.2: å®‰è£… Python å’Œ pip

ç³»ç»Ÿé€šå¸¸è‡ªå¸¦Pythonï¼Œä½†æˆ‘ä»¬ç¡®ä¿ `pip`ï¼ˆPythonçš„åŒ…ç®¡ç†å™¨ï¼‰ä¹Ÿå·²å®‰è£…ã€‚

```bash
sudo apt install python3 python3-pip -y
```

### æ­¥éª¤ 2.3: å®‰è£… Google Chrome æµè§ˆå™¨

æˆ‘ä»¬çš„è„šæœ¬éœ€è¦é©±åŠ¨ä¸€ä¸ªçœŸå®çš„æµè§ˆå™¨ï¼Œæ‰€ä»¥å¿…é¡»åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…å®ƒã€‚

```bash
# ä¸‹è½½Chromeçš„å®˜æ–¹å®‰è£…åŒ…
wget [https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb](https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb)

# å®‰è£…Chromeï¼Œaptä¼šè‡ªåŠ¨å¤„ç†æ‰€æœ‰ä¾èµ–
sudo apt install ./google-chrome-stable_current_amd64.deb -y
```

### æ­¥éª¤ 2.4: å®‰è£… Python ä¾èµ–åº“

å®‰è£… `selenium`ï¼ˆæµè§ˆå™¨â€œé¥æ§å™¨â€ï¼‰å’Œ `undetected-chromedriver`ï¼ˆèƒ½é¿å…è¢«ç½‘ç«™æ£€æµ‹åˆ°çš„â€œæ™ºèƒ½é’¥åŒ™â€ï¼‰ã€‚

```bash
pip3 install selenium undetected-chromedriver
```

---

## ç¬¬ä¸‰éƒ¨åˆ†ï¼šåˆ›å»º Telegram æœºå™¨äºº (Telegram Bot Setup)

ä½ éœ€è¦ä¸€ä¸ªæœºå™¨äººæ¥ç»™ä½ å‘æ¶ˆæ¯ã€‚

1.  åœ¨Telegramé‡Œæœç´¢ `BotFather` å¹¶å¼€å§‹å¯¹è¯ã€‚
2.  å‘é€ `/newbot` å‘½ä»¤ã€‚
3.  æŒ‰ç…§æç¤ºï¼Œä¸ºä½ çš„æœºå™¨äººè®¾ç½®ä¸€ä¸ª**åç§° (Name)**ï¼Œä¾‹å¦‚ `æˆ‘çš„åº“å­˜ç›‘æ§åŠ©æ‰‹`ã€‚
4.  å†è®¾ç½®ä¸€ä¸ª**ç”¨æˆ·å (Username)**ï¼Œå®ƒå¿…é¡»ä»¥ `bot` ç»“å°¾ï¼Œä¾‹å¦‚ `my_stock_monitor_bot`ã€‚
5.  åˆ›å»ºæˆåŠŸåï¼Œ`BotFather` ä¼šç»™ä½ ä¸€é•¿ä¸² **Token**ã€‚**è¯·åŠ¡å¿…å¤åˆ¶å¹¶ä¿å­˜å¥½è¿™ä¸ªToken**ã€‚
6.  æ¥ç€ï¼Œåœ¨Telegramé‡Œæœç´¢å¹¶æ‰¾åˆ°ä½ çš„æœºå™¨äººï¼Œç»™å®ƒå‘é€ä¸€æ¡ä»»æ„æ¶ˆæ¯ï¼ˆæ¯”å¦‚ `/start`ï¼‰ã€‚
7.  **è·å–ä½ çš„ Chat ID**ï¼šåœ¨æµè§ˆå™¨ä¸­è®¿é—®ä»¥ä¸‹é“¾æ¥ï¼ˆæŠŠ`ä½ çš„Token`æ¢æˆä½ åˆšåˆšè·å–åˆ°çš„Tokenï¼‰ï¼š
    `https://api.telegram.org/botä½ çš„Token/getUpdates`
    åœ¨è¿”å›çš„é¡µé¢ä¸­ï¼Œæ‰¾åˆ° `"chat":{"id":ä¸€ä¸²æ•°å­—}`ï¼Œè¿™ä¸²æ•°å­—å°±æ˜¯ä½ çš„ **Chat ID**ã€‚

---

## ç¬¬å››éƒ¨åˆ†ï¼šç¼–å†™ä¸é…ç½®ç›‘æ§è„šæœ¬ (The Script)

ç°åœ¨ï¼Œæˆ‘ä»¬æ¥åˆ›å»ºå¹¶é…ç½®æ ¸å¿ƒçš„ç›‘æ§è„šæœ¬ã€‚

### æ­¥éª¤ 4.1: åˆ›å»ºé¡¹ç›®ç›®å½•å¹¶è¿›å…¥

```bash
mkdir ~/stock_monitor
cd ~/stock_monitor
```

### æ­¥éª¤ 4.2: åˆ›å»ºè„šæœ¬æ–‡ä»¶

ä½¿ç”¨ `nano` ç¼–è¾‘å™¨åˆ›å»ºä¸€ä¸ªæ–°çš„Pythonæ–‡ä»¶ã€‚

```bash
nano stock_monitor.py
```

### æ­¥éª¤ 4.3: ç²˜è´´æœ€ç»ˆè„šæœ¬ä»£ç 

è¯·å°†æœ¬ä»“åº“ä¸­çš„ [`stock_monitor.py`](https://github.com/meaen/Stock_Monitoring_Bot/blob/main/stock_monitor.py) æ–‡ä»¶å†…çš„å®Œæ•´ä»£ç ï¼Œç²˜è´´è‡³ `nano` ç¼–è¾‘å™¨ä¸­ã€‚

### æ­¥éª¤ 4.4: é…ç½®è„šæœ¬

1.  åœ¨ `nano` ç¼–è¾‘å™¨é‡Œï¼Œæ‰¾åˆ°è„šæœ¬é¡¶éƒ¨çš„é…ç½®åŒºåŸŸã€‚
2.  å°† `TELEGRAM_BOT_TOKEN` çš„å€¼æ›¿æ¢æˆä½ è‡ªå·±çš„Bot Tokenã€‚
3.  å°† `TELEGRAM_CHAT_ID` çš„å€¼æ›¿æ¢æˆä½ è‡ªå·±çš„Chat IDã€‚
4.  ï¼ˆå¯é€‰ï¼‰åœ¨ `MONITOR_PRODUCTS` åˆ—è¡¨ä¸­ï¼Œä¿®æ”¹å•†å“åç§°ï¼Œæˆ–æ·»åŠ /åˆ é™¤ä½ æƒ³ç›‘æ§çš„å•†å“ã€‚
5.  é…ç½®å®Œæˆåï¼ŒæŒ‰ `Ctrl + X`ï¼Œç„¶åæŒ‰ `Y`ï¼Œæœ€åæŒ‰å›è½¦é”®ï¼Œä¿å­˜å¹¶é€€å‡ºã€‚

---

## ç¬¬äº”éƒ¨åˆ†ï¼šæµ‹è¯•è„šæœ¬ (Manual Test)

åœ¨æ­£å¼éƒ¨ç½²å‰ï¼Œå…ˆæ‰‹åŠ¨è¿è¡Œä¸€æ¬¡ï¼Œç¡®ä¿ä¸€åˆ‡æ­£å¸¸ã€‚

```bash
python3 stock_monitor.py
```

å¦‚æœä½ çš„é…ç½®éƒ½æ­£ç¡®ï¼Œä½ åº”è¯¥èƒ½çœ‹åˆ°è„šæœ¬å¼€å§‹æ£€æŸ¥å•†å“ï¼Œå¹¶æˆåŠŸæ”¶åˆ°ç¬¬ä¸€æ‰¹Telegramé€šçŸ¥ã€‚ç¡®è®¤æ— è¯¯åï¼ŒæŒ‰ `Ctrl + C` åœæ­¢è„šæœ¬ã€‚

---

## ç¬¬å…­éƒ¨åˆ†ï¼šéƒ¨ç½²ä¸ºç³»ç»ŸæœåŠ¡ (Deployment as a Service)

ä¸ºäº†è®©è„šæœ¬èƒ½å¼€æœºè‡ªå¯ã€æ— äººå€¼å®ˆåœ°è¿è¡Œï¼Œæˆ‘ä»¬å°†å…¶åˆ›å»ºä¸ºä¸€ä¸ªç³»ç»ŸæœåŠ¡ã€‚

### æ­¥éª¤ 6.1: åˆ›å»ºæœåŠ¡æ–‡ä»¶

```bash
sudo nano /etc/systemd/system/stock-monitor.service
```

### æ­¥éª¤ 6.2: ç²˜è´´æœåŠ¡é…ç½®

å°†ä¸‹é¢çš„é…ç½®å†…å®¹å®Œæ•´åœ°å¤åˆ¶å¹¶ç²˜è´´åˆ°ç¼–è¾‘å™¨ä¸­ã€‚

```ini
[Unit]
Description=Stock Monitor Service by Gemini
After=network.target

[Service]
Type=simple
User=ubuntu
WorkingDirectory=/home/ubuntu/stock_monitor
ExecStart=/usr/bin/python3 /home/ubuntu/stock_monitor/stock_monitor.py
Restart=always
RestartSec=15

[Install]
WantedBy=multi-user.target
```

> **æ³¨æ„**ï¼šè¿™é‡Œçš„ `User` å’Œè·¯å¾„ `WorkingDirectory`/`ExecStart` éƒ½æ˜¯åŸºäºä½ çš„ç”¨æˆ·åæ˜¯ `ubuntu`ã€‚å¦‚æœä½ çš„ç”¨æˆ·åæ˜¯ `root` æˆ–å…¶ä»–ï¼Œè¯·åŠ¡å¿…ä¿®æ”¹ã€‚

ç²˜è´´åï¼ŒæŒ‰ `Ctrl + X` -> `Y` -> å›è½¦ï¼Œä¿å­˜å¹¶é€€å‡ºã€‚

### æ­¥éª¤ 6.3: å¯åŠ¨å¹¶è®¾ç½®å¼€æœºè‡ªå¯

ä¾æ¬¡è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
# é‡æ–°åŠ è½½systemdé…ç½®ï¼Œè®©æ–°æœåŠ¡ç”Ÿæ•ˆ
sudo systemctl daemon-reload

# ç«‹å³å¯åŠ¨æœåŠ¡
sudo systemctl start stock-monitor

# è®¾ç½®æœåŠ¡ä¸ºå¼€æœºè‡ªå¯
sudo systemctl enable stock-monitor
```

---

## ç¬¬ä¸ƒéƒ¨åˆ†ï¼šæœåŠ¡ç®¡ç†ä¸æ—¥å¿—æŸ¥çœ‹ (Management)

ç°åœ¨ï¼Œä½ çš„è„šæœ¬å·²ç»æ˜¯ä¸€ä¸ªçœŸæ­£çš„åå°æœåŠ¡äº†ã€‚

- **æŸ¥çœ‹æœåŠ¡çŠ¶æ€**:
  ```bash
  sudo systemctl status stock-monitor.service
  ```
  > çœ‹åˆ°ç»¿è‰²çš„ `active (running)` å°±ä»£è¡¨ä¸€åˆ‡æ­£å¸¸ã€‚

- **æŸ¥çœ‹å®æ—¶æ—¥å¿—**:
  ```bash
  journalctl -u stock-monitor.service -f
  ```

- **åœæ­¢æœåŠ¡**:
  ```bash
  sudo systemctl stop stock-monitor.service
  ```

- **é‡å¯æœåŠ¡** (ä¾‹å¦‚ï¼Œåœ¨ä½ ä¿®æ”¹äº†`stock_monitor.py`çš„é…ç½®å):
  ```bash
  sudo systemctl restart stock-monitor.service
  ```

è‡³æ­¤ï¼Œä½ å·²æˆåŠŸæ­å»ºäº†ä¸€ä¸ªå¼ºå¤§ã€ç¨³å®šã€å…¨è‡ªåŠ¨çš„åº“å­˜ç›‘æ§ç³»ç»Ÿã€‚æ­å–œï¼
